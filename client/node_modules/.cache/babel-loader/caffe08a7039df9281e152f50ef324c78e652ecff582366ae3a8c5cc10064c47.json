{"ast":null,"code":"// cartActions.js\nexport const addToCart = (items, quantity, varient) => (dispatch, getState) => {\n  const cartItem = {\n    name: items.name,\n    _id: items._id,\n    image: items.image,\n    varient: varient,\n    quantity: Number(quantity),\n    prices: items.prices,\n    price: items.prices[0][varient] * quantity\n  };\n  if (cartItem.quantity > 20) {\n    alert('You cannot add more than 20!');\n  } else {\n    if (cartItem.quantity < 1) {\n      dispatch({\n        type: 'DELETE_FROM_CART',\n        payload: items\n      });\n    } else {\n      dispatch({\n        type: 'ADD_TO_CART',\n        payload: cartItem\n      });\n    }\n  }\n  const cartItems = getState().cartReducer.cartItems;\n  localStorage.setItem('cartItems', JSON.stringify(cartItems));\n};\nexport const deleteFromCart = menu => (dispatch, getState) => {\n  dispatch({\n    type: 'DELETE_FROM_CART',\n    payload: menu\n  });\n  const cartItems = getState().cartReducer.cartItems;\n  localStorage.setItem('cartItems', JSON.stringify(cartItems));\n};\n\n// cartReducer.js\nexport const cartReducer = (state = {\n  cartItems: []\n}, action) => {\n  switch (action.type) {\n    case 'ADD_TO_CART':\n      const existingItemIndex = state.cartItems.findIndex(item => item._id === action.payload._id && item.varient === action.payload.varient);\n      if (existingItemIndex !== -1) {\n        // If the item already exists, update the quantity and price\n        const updatedItems = [...state.cartItems];\n        updatedItems[existingItemIndex] = {\n          ...updatedItems[existingItemIndex],\n          quantity: action.payload.quantity,\n          price: action.payload.price\n        };\n        return {\n          ...state,\n          cartItems: updatedItems\n        };\n      } else {\n        // If the item doesn't exist, add it to the cart\n        return {\n          ...state,\n          cartItems: [...state.cartItems, action.payload]\n        };\n      }\n    case 'DELETE_FROM_CART':\n      return {\n        ...state,\n        cartItems: state.cartItems.filter(item => !(item._id === action.payload._id && item.varient === action.payload.varient))\n      };\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["addToCart","items","quantity","varient","dispatch","getState","cartItem","name","_id","image","Number","prices","price","alert","type","payload","cartItems","cartReducer","localStorage","setItem","JSON","stringify","deleteFromCart","menu","state","action","existingItemIndex","findIndex","item","updatedItems","filter"],"sources":["C:/Users/dell r5/Documents/MERN-FOOD/client/src/actions/cartActions.js"],"sourcesContent":["// cartActions.js\r\nexport const addToCart = (items, quantity, varient) => (dispatch, getState) => {\r\n    const cartItem = {\r\n      name: items.name,\r\n      _id: items._id,\r\n      image: items.image,\r\n      varient: varient,\r\n      quantity: Number(quantity),\r\n      prices: items.prices,\r\n      price: items.prices[0][varient] * quantity,\r\n    };\r\n  \r\n    if (cartItem.quantity > 20) {\r\n      alert('You cannot add more than 20!');\r\n    } else {\r\n      if (cartItem.quantity < 1) {\r\n        dispatch({ type: 'DELETE_FROM_CART', payload: items });\r\n      } else {\r\n        dispatch({ type: 'ADD_TO_CART', payload: cartItem });\r\n      }\r\n    }\r\n  \r\n    const cartItems = getState().cartReducer.cartItems;\r\n    localStorage.setItem('cartItems', JSON.stringify(cartItems));\r\n  };\r\n  \r\n  export const deleteFromCart = (menu) => (dispatch, getState) => {\r\n    dispatch({\r\n      type: 'DELETE_FROM_CART',\r\n      payload: menu,\r\n    });\r\n    const cartItems = getState().cartReducer.cartItems;\r\n    localStorage.setItem('cartItems', JSON.stringify(cartItems));\r\n  };\r\n  \r\n  // cartReducer.js\r\n  export const cartReducer = (state = { cartItems: [] }, action) => {\r\n    switch (action.type) {\r\n      case 'ADD_TO_CART':\r\n        const existingItemIndex = state.cartItems.findIndex(\r\n          (item) => item._id === action.payload._id && item.varient === action.payload.varient\r\n        );\r\n  \r\n        if (existingItemIndex !== -1) {\r\n          // If the item already exists, update the quantity and price\r\n          const updatedItems = [...state.cartItems];\r\n          updatedItems[existingItemIndex] = {\r\n            ...updatedItems[existingItemIndex],\r\n            quantity: action.payload.quantity,\r\n            price: action.payload.price,\r\n          };\r\n  \r\n          return {\r\n            ...state,\r\n            cartItems: updatedItems,\r\n          };\r\n        } else {\r\n          // If the item doesn't exist, add it to the cart\r\n          return {\r\n            ...state,\r\n            cartItems: [...state.cartItems, action.payload],\r\n          };\r\n        }\r\n  \r\n      case 'DELETE_FROM_CART':\r\n        return {\r\n          ...state,\r\n          cartItems: state.cartItems.filter(\r\n            (item) => !(item._id === action.payload._id && item.varient === action.payload.varient)\r\n          ),\r\n        };\r\n  \r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}