{"ast":null,"code":"// store.js\nimport { combineReducers, createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport { getAllFoodsReducer } from './reducers/foodReducer';\nimport { cartReducer } from './reducers/cartReducer';\nimport { registerUserReducer, loginUserReducer } from './reducers/userReducer';\n\n// Load user info from local storage\nconst userInfoFromStorage = localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')) : null;\nconst finalReducer = combineReducers({\n  getAllFoodsReducer: getAllFoodsReducer,\n  cartReducer: cartReducer,\n  registerUserReducer: registerUserReducer,\n  loginUserReducer: loginUserReducer\n});\nconst initialState = {\n  cartReducer: {\n    cartItems: []\n  },\n  loginUserReducer: {\n    userInfo: userInfoFromStorage,\n    loading: false,\n    error: null\n  },\n  registerUserReducer: {\n    loading: false,\n    success: false,\n    error: null\n  }\n};\nconst composeEnhancers = composeWithDevTools({});\nconst store = createStore(finalReducer, initialState, composeEnhancers(applyMiddleware(thunk)));\n\n// Subscribe to changes in the store and update local storage accordingly\nstore.subscribe(() => {\n  const {\n    loginUserReducer\n  } = store.getState();\n  localStorage.setItem('userInfo', JSON.stringify(loginUserReducer.userInfo));\n});\nexport default store;","map":{"version":3,"names":["combineReducers","createStore","applyMiddleware","thunk","composeWithDevTools","getAllFoodsReducer","cartReducer","registerUserReducer","loginUserReducer","userInfoFromStorage","localStorage","getItem","JSON","parse","finalReducer","initialState","cartItems","userInfo","loading","error","success","composeEnhancers","store","subscribe","getState","setItem","stringify"],"sources":["C:/Users/dell r5/Documents/MERN-FOOD/client/src/store.js"],"sourcesContent":["// store.js\r\nimport { combineReducers, createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport { getAllFoodsReducer } from './reducers/foodReducer';\r\nimport { cartReducer } from './reducers/cartReducer';\r\nimport { registerUserReducer, loginUserReducer } from './reducers/userReducer';\r\n\r\n// Load user info from local storage\r\nconst userInfoFromStorage = localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')) : null;\r\n\r\nconst finalReducer = combineReducers({\r\n    getAllFoodsReducer: getAllFoodsReducer,\r\n    cartReducer: cartReducer,\r\n    registerUserReducer: registerUserReducer,\r\n    loginUserReducer: loginUserReducer,\r\n});\r\n\r\nconst initialState = {\r\n    cartReducer: {\r\n        cartItems: [],\r\n    },\r\n    loginUserReducer: {\r\n        userInfo: userInfoFromStorage,\r\n        loading: false,\r\n        error: null,\r\n    },\r\n    registerUserReducer: {\r\n        loading: false,\r\n        success: false,\r\n        error: null,\r\n    },\r\n};\r\n\r\nconst composeEnhancers = composeWithDevTools({});\r\nconst store = createStore(finalReducer, initialState, composeEnhancers(applyMiddleware(thunk)));\r\n\r\n// Subscribe to changes in the store and update local storage accordingly\r\nstore.subscribe(() => {\r\n    const { loginUserReducer } = store.getState();\r\n    localStorage.setItem('userInfo', JSON.stringify(loginUserReducer.userInfo));\r\n});\r\n\r\nexport default store;\r\n"],"mappings":"AAAA;AACA,SAASA,eAAe,EAAEC,WAAW,EAAEC,eAAe,QAAQ,OAAO;AACrE,OAAOC,KAAK,MAAM,aAAa;AAC/B,SAASC,mBAAmB,QAAQ,0BAA0B;AAC9D,SAASC,kBAAkB,QAAQ,wBAAwB;AAC3D,SAASC,WAAW,QAAQ,wBAAwB;AACpD,SAASC,mBAAmB,EAAEC,gBAAgB,QAAQ,wBAAwB;;AAE9E;AACA,MAAMC,mBAAmB,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI;AAElH,MAAMG,YAAY,GAAGd,eAAe,CAAC;EACjCK,kBAAkB,EAAEA,kBAAkB;EACtCC,WAAW,EAAEA,WAAW;EACxBC,mBAAmB,EAAEA,mBAAmB;EACxCC,gBAAgB,EAAEA;AACtB,CAAC,CAAC;AAEF,MAAMO,YAAY,GAAG;EACjBT,WAAW,EAAE;IACTU,SAAS,EAAE;EACf,CAAC;EACDR,gBAAgB,EAAE;IACdS,QAAQ,EAAER,mBAAmB;IAC7BS,OAAO,EAAE,KAAK;IACdC,KAAK,EAAE;EACX,CAAC;EACDZ,mBAAmB,EAAE;IACjBW,OAAO,EAAE,KAAK;IACdE,OAAO,EAAE,KAAK;IACdD,KAAK,EAAE;EACX;AACJ,CAAC;AAED,MAAME,gBAAgB,GAAGjB,mBAAmB,CAAC,CAAC,CAAC,CAAC;AAChD,MAAMkB,KAAK,GAAGrB,WAAW,CAACa,YAAY,EAAEC,YAAY,EAAEM,gBAAgB,CAACnB,eAAe,CAACC,KAAK,CAAC,CAAC,CAAC;;AAE/F;AACAmB,KAAK,CAACC,SAAS,CAAC,MAAM;EAClB,MAAM;IAAEf;EAAiB,CAAC,GAAGc,KAAK,CAACE,QAAQ,CAAC,CAAC;EAC7Cd,YAAY,CAACe,OAAO,CAAC,UAAU,EAAEb,IAAI,CAACc,SAAS,CAAClB,gBAAgB,CAACS,QAAQ,CAAC,CAAC;AAC/E,CAAC,CAAC;AAEF,eAAeK,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}